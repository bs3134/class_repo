HW2
================

``` r
library(tidyverse)
```

    ## -- Attaching packages -------------------------------------------------------------------------------- tidyverse 1.2.1 --

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts ----------------------------------------------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
subway_file=
  read_csv(file="./NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(-division,-exit_only,-staff_hours,-staffing) %>%
  mutate(entry=recode(entry,"YES"=T,"NO"=F))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
dim(subway_file)  
```

    ## [1] 1868   28

``` r
#The dataset contains lines, station names, station latitude, station longitude, routes, entrance type, entry, vending, ADA, ADA notes, and the dimension is 1868x28 #

#Use distinct function, we can get there are totally 465 distinct stations#
distinct(subway_file,line,station_name) 
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # ... with 455 more rows

``` r
#Therefore, there are 468 stations are ADA compliant#
sum(subway_file$ada)     
```

    ## [1] 468

``` r
#Convert the value in vending column into 0 and 1 from Yes and No, then we get 183 stations without vending. Using 183 diveded by total station number 1868, then we can get the proportion of station without vending#
new_list=ifelse(subway_file$vending=="YES", 0, 1)
sum(new_list)/1868
```

    ## [1] 0.09796574

``` r
#We change the file into tidy, and we can get there are 60 stations containing A#
real_data=gather(subway_file,key=route,value=bus_number,route1 :route11)
after_data=distinct(real_data,line,station_name,route,bus_number,ada) 
after_data
```

    ## # A tibble: 5,117 x 5
    ##    line     station_name             ada   route  bus_number
    ##    <chr>    <chr>                    <lgl> <chr>  <chr>     
    ##  1 4 Avenue 25th St                  FALSE route1 R         
    ##  2 4 Avenue 36th St                  FALSE route1 N         
    ##  3 4 Avenue 45th St                  FALSE route1 R         
    ##  4 4 Avenue 53rd St                  FALSE route1 R         
    ##  5 4 Avenue 59th St                  FALSE route1 N         
    ##  6 4 Avenue 77th St                  FALSE route1 R         
    ##  7 4 Avenue 86th St                  FALSE route1 R         
    ##  8 4 Avenue 95th St                  FALSE route1 R         
    ##  9 4 Avenue 9th St                   FALSE route1 F         
    ## 10 4 Avenue Atlantic Av-Barclays Ctr TRUE  route1 B         
    ## # ... with 5,107 more rows

``` r
length(which(after_data$bus_number == "A")) 
```

    ## [1] 60

``` r
#And 925 stations are ADA compliant#
sum(after_data$ada)
```

    ## [1] 925
